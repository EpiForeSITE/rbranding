<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>R Branding Package Developer Instructions • rbranding</title><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/Open_Sans-0.4.10/font.css" rel="stylesheet"><link href="deps/IBM_Plex_Mono-0.4.10/font.css" rel="stylesheet"><link href="deps/Rubik-0.4.10/font.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="R Branding Package Developer Instructions"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">rbranding</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="articles/rbranding.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="articles/Accessibility-Guidelines.html">Accessibility-Guidelines</a></li>
    <li><a class="dropdown-item" href="articles/ggplot2-integration.html">ggplot2 and Thematic Integration with Brand Themes</a></li>
    <li><a class="dropdown-item" href="articles/quarto-templates.html">Quarto templates</a></li>
    <li><a class="dropdown-item" href="articles/shiny-templates.html">Shiny Templates</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>R Branding Package Developer Instructions</h1>

    </div>

<div id="r-branding-package-developer-instructions" class="section level1">

<p><strong>ALWAYS follow these instructions first and only fallback to additional search or bash commands if the information here is incomplete or found to be in error.</strong></p>
<div class="section level2">
<h2 id="repository-overview">Repository Overview<a class="anchor" aria-label="anchor" href="#repository-overview"></a></h2>
<p>This is an R package called <code>rbranding</code> that facilitates the creation of Shiny apps for CFA projects conforming to STLTs’ branding and design standards. The package provides automated branding configuration, theme management, and interactive component linking for ForeSITE Shiny applications.</p>
</div>
<div class="section level2">
<h2 id="core-package-functions">Core Package Functions<a class="anchor" aria-label="anchor" href="#core-package-functions"></a></h2>
<ul><li>
<code><a href="reference/brand_init.html">brand_init()</a></code> - Initializes branding configuration by creating config.yml and _brand.yml files</li>
<li>
<code><a href="reference/get_brand.html">get_brand()</a></code> - Downloads/updates latest branding files from remote repository with user prompts</li>
<li>
<code>link_leaflet_dt()</code> - Links leaflet maps with DT data tables for interactive dashboards</li>
</ul></div>
<div class="section level2">
<h2 id="dependencies-and-installation">Dependencies and Installation<a class="anchor" aria-label="anchor" href="#dependencies-and-installation"></a></h2>
<div class="section level3">
<h3 id="system-requirements">System Requirements<a class="anchor" aria-label="anchor" href="#system-requirements"></a></h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># Install R and core development tools</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">sudo</span> apt-get update</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> r-base r-base-dev</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> libcurl4-openssl-dev libssl-dev libxml2-dev</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> texlive-latex-base texlive-latex-extra texlive-fonts-extra</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="r-package-dependencies">R Package Dependencies<a class="anchor" aria-label="anchor" href="#r-package-dependencies"></a></h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># Install core R packages via apt (more reliable than CRAN in restricted environments)</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> r-cran-devtools r-cran-yaml r-cran-shiny r-cran-dt r-cran-htmltools</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> r-cran-dplyr r-cran-knitr r-cran-rmarkdown r-cran-bslib</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co"># If network access to CRAN is available, install additional packages:</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="fu">sudo</span> Rscript <span class="at">-e</span> <span class="st">"install.packages(c('leaflet', 'tinytest', 'here', 'pkgdown'), repos='https://cloud.r-project.org/')"</span></span></code></pre></div>
<p><strong>CRITICAL:</strong> If CRAN access fails with network errors, this is normal in restricted environments. The package builds successfully with just the apt-installed dependencies.</p>
</div>
</div>
<div class="section level2">
<h2 id="building-and-testing">Building and Testing<a class="anchor" aria-label="anchor" href="#building-and-testing"></a></h2>
<div class="section level3">
<h3 id="build-commands">Build Commands<a class="anchor" aria-label="anchor" href="#build-commands"></a></h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># Build and check the package - NEVER CANCEL, takes 10-15 seconds</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="va">_R_CHECK_FORCE_SUGGESTS_</span><span class="op">=</span>false <span class="fu">make</span> check</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="co"># Install the package - takes 1 second  </span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="fu">sudo</span> make install</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="co"># Generate documentation - takes 1.5 seconds</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="fu">make</span> docs</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="co"># Build pkgdown website (if pkgdown available)</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="fu">make</span> website</span></code></pre></div>
<p><strong>NEVER CANCEL builds or tests.</strong> Package builds complete in 10-15 seconds. Always set appropriate timeouts: - Build/check commands: Set timeout to 30+ minutes - Documentation: Set timeout to 10+ minutes - Installation: Set timeout to 5+ minutes</p>
</div>
<div class="section level3">
<h3 id="testing">Testing<a class="anchor" aria-label="anchor" href="#testing"></a></h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># Test core package functionality (always works)</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="bu">echo</span> <span class="st">'library(rbranding); brand_init()'</span> <span class="kw">|</span> <span class="ex">R</span> <span class="at">--no-save</span> <span class="at">--quiet</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="co"># Run unit tests (requires tinytest and proper paths)</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="bu">echo</span> <span class="st">'library(tinytest); run_test_dir("inst/tinytest")'</span> <span class="kw">|</span> <span class="ex">R</span> <span class="at">--no-save</span> <span class="at">--quiet</span></span></code></pre></div>
<p><strong>Note:</strong> Current tests have path dependency issues. Core package functionality can be validated manually.</p>
</div>
</div>
<div class="section level2">
<h2 id="running-applications">Running Applications<a class="anchor" aria-label="anchor" href="#running-applications"></a></h2>
<div class="section level3">
<h3 id="available-applications">Available Applications<a class="anchor" aria-label="anchor" href="#available-applications"></a></h3>
<ul><li>
<strong>Main App</strong>: <code>inst/app/app.R</code> - Main branding demonstration app</li>
<li>
<strong>Wastewater Dashboard</strong>: <code>inst/examples/wastewater/app.R</code> - Interactive map/table linking</li>
<li>
<strong>Quarto Website</strong>: <code>inst/examples/qwebsite/</code> - Branded Quarto site example<br></li>
<li>
<strong>R Markdown</strong>: <code>inst/examples/rmark/</code> - Branded R Markdown examples</li>
</ul></div>
<div class="section level3">
<h3 id="running-apps-with-script">Running Apps with Script<a class="anchor" aria-label="anchor" href="#running-apps-with-script"></a></h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># Run main app (in inst/app/)</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="ex">./run_app.sh</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="co"># Note: Script looks for inst/app/examples/ but examples are in inst/examples/</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="co"># Run examples manually instead:</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="bu">cd</span> inst/examples/wastewater <span class="kw">&amp;&amp;</span> <span class="ex">Rscript</span> app.R</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="co"># Get script help</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="ex">./run_app.sh</span> <span class="at">--help</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="manual-shiny-app-execution">Manual Shiny App Execution<a class="anchor" aria-label="anchor" href="#manual-shiny-app-execution"></a></h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># For apps requiring full dependencies</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="bu">cd</span> inst/examples/wastewater</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="ex">Rscript</span> <span class="at">-e</span> <span class="st">"shiny::runApp('app.R', host='0.0.0.0', port=3838)"</span></span></code></pre></div>
<p><strong>DEPENDENCY LIMITATION:</strong> Example apps require <code>leaflet</code> and <code>DT</code> packages which may not be available in all environments. Core package functionality works without these.</p>
</div>
</div>
<div class="section level2">
<h2 id="validation-scenarios">Validation Scenarios<a class="anchor" aria-label="anchor" href="#validation-scenarios"></a></h2>
<div class="section level3">
<h3 id="always-test-after-making-changes">ALWAYS Test After Making Changes<a class="anchor" aria-label="anchor" href="#always-test-after-making-changes"></a></h3>
<ol style="list-style-type: decimal"><li>
<p><strong>Build Validation</strong>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="va">_R_CHECK_FORCE_SUGGESTS_</span><span class="op">=</span>false <span class="fu">make</span> check</span></code></pre></div>
<p>Must complete successfully in 10-15 seconds.</p>
</li>
<li>
<p><strong>Core Function Test</strong>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">'library(rbranding); brand_init()'</span> <span class="kw">|</span> <span class="ex">R</span> <span class="at">--no-save</span> <span class="at">--quiet</span></span></code></pre></div>
<p>Should create config.yml and _brand.yml files.</p>
</li>
<li>
<p><strong>Package Help Test</strong>:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">'library(rbranding); help(package="rbranding")'</span> <span class="kw">|</span> <span class="ex">R</span> <span class="at">--no-save</span> <span class="at">--quiet</span>  </span></code></pre></div>
<p>Should display package information and function index.</p>
</li>
<li>
<p><strong>Documentation Test</strong>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">make</span> docs</span></code></pre></div>
<p>Should complete without errors in 1.5 seconds.</p>
</li>
</ol></div>
<div class="section level3">
<h3 id="manual-testing-workflow">Manual Testing Workflow<a class="anchor" aria-label="anchor" href="#manual-testing-workflow"></a></h3>
<p><strong>When dependencies are NOT available (common in restricted environments):</strong> 1. Test core package functions: <code>bash    echo 'library(rbranding); brand_init()' | R --no-save --quiet</code> Should create config.yml and _brand.yml files without errors.</p>
<ol start="2" style="list-style-type: decimal"><li>
<p>Test package loading and help:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">'library(rbranding); help(package="rbranding")'</span> <span class="kw">|</span> <span class="ex">R</span> <span class="at">--no-save</span> <span class="at">--quiet</span></span></code></pre></div>
</li>
</ol><p><strong>When dependencies ARE available (full environment):</strong> 1. Navigate to <code>inst/examples/wastewater/</code> 2. Start the Shiny app: <code>Rscript -e "shiny::runApp('app.R')"</code> 3. Test interactive features: - Click on map markers to verify table row selection - Click on table rows to verify map marker highlighting<br>
- Verify details panel updates correctly - Test with multiple locations</p>
<p><strong>Note:</strong> Main app in <code>inst/app/app.R</code> currently has structural issues. Use example apps for testing.</p>
</div>
</div>
<div class="section level2">
<h2 id="repository-structure">Repository Structure<a class="anchor" aria-label="anchor" href="#repository-structure"></a></h2>
<div class="section level3">
<h3 id="key-directories">Key Directories<a class="anchor" aria-label="anchor" href="#key-directories"></a></h3>
<ul><li>
<code>R/</code> - Package source code (get_repo.R, get_template.R, link_plots.R)</li>
<li>
<code>inst/examples/</code> - Example applications demonstrating package usage</li>
<li>
<code>inst/tinytest/</code> - Unit tests using tinytest framework</li>
<li>
<code>man/</code> - Generated documentation files</li>
<li>
<code>vignettes/</code> - Package vignettes and tutorials</li>
<li>
<code>.github/workflows/</code> - CI/CD pipelines (R-CMD-check.yaml, pkgdown.yaml)</li>
</ul></div>
<div class="section level3">
<h3 id="important-files">Important Files<a class="anchor" aria-label="anchor" href="#important-files"></a></h3>
<ul><li>
<code>DESCRIPTION</code> - Package metadata and dependencies</li>
<li>
<code>Makefile</code> - Build automation (check, install, docs, example targets)</li>
<li>
<code>run_app.sh</code> - Script for running example applications</li>
<li>
<code>_brand.yml</code> - Default branding configuration</li>
<li>
<code>config.yml</code> - Package configuration template</li>
</ul></div>
</div>
<div class="section level2">
<h2 id="common-issues-and-solutions">Common Issues and Solutions<a class="anchor" aria-label="anchor" href="#common-issues-and-solutions"></a></h2>
<div class="section level3">
<h3 id="build-failures">Build Failures<a class="anchor" aria-label="anchor" href="#build-failures"></a></h3>
<ul><li>
<strong>Missing leaflet</strong>: Normal in restricted environments. Use <code>_R_CHECK_FORCE_SUGGESTS_=false</code> flag.</li>
<li>
<strong>LaTeX errors</strong>: Install <code>texlive-fonts-extra</code> package.</li>
<li>
<strong>Permission errors</strong>: Use <code>sudo</code> for system-wide R package installation.</li>
</ul></div>
<div class="section level3">
<h3 id="network-issues">Network Issues<a class="anchor" aria-label="anchor" href="#network-issues"></a></h3>
<ul><li>
<strong>CRAN access blocked</strong>: Use apt packages instead of CRAN when possible.</li>
<li>
<strong>Download failures in get_brand()</strong>: Normal behavior, function includes error handling.</li>
</ul></div>
<div class="section level3">
<h3 id="application-issues">Application Issues<a class="anchor" aria-label="anchor" href="#application-issues"></a></h3>
<ul><li>
<strong>Missing leaflet/DT</strong>: Example apps require these packages. Core package functions work without them.</li>
<li>
<strong>Port conflicts</strong>: Default Shiny port is 3838, change if needed.</li>
</ul></div>
</div>
<div class="section level2">
<h2 id="cicd-information">CI/CD Information<a class="anchor" aria-label="anchor" href="#cicd-information"></a></h2>
<div class="section level3">
<h3 id="github-workflows">GitHub Workflows<a class="anchor" aria-label="anchor" href="#github-workflows"></a></h3>
<ul><li>
<strong>R-CMD-check.yaml</strong>: Runs on push/PR, tests across multiple R versions and OS</li>
<li>
<strong>pkgdown.yaml</strong>: Builds and deploys package documentation website</li>
</ul></div>
<div class="section level3">
<h3 id="build-matrix">Build Matrix<a class="anchor" aria-label="anchor" href="#build-matrix"></a></h3>
<p>Tests run on: - macOS (latest R) - Windows (latest R)<br>
- Ubuntu (devel, release, oldrel-1)</p>
</div>
</div>
<div class="section level2">
<h2 id="development-workflow">Development Workflow<a class="anchor" aria-label="anchor" href="#development-workflow"></a></h2>
<div class="section level3">
<h3 id="making-changes">Making Changes<a class="anchor" aria-label="anchor" href="#making-changes"></a></h3>
<ol style="list-style-type: decimal"><li>Always run build validation first: <code>_R_CHECK_FORCE_SUGGESTS_=false make check</code>
</li>
<li>Test core functionality: <code>echo 'library(rbranding); brand_init()' | R --no-save --quiet</code>
</li>
<li>Update documentation if needed: <code>make docs</code>
</li>
<li>Validate changes don’t break existing functionality</li>
<li>Test example apps if dependencies available</li>
</ol></div>
<div class="section level3">
<h3 id="before-committing">Before Committing<a class="anchor" aria-label="anchor" href="#before-committing"></a></h3>
<ul><li>Ensure package builds successfully</li>
<li>Run documentation generation<br></li>
<li>Test core package functions</li>
<li>Verify no new errors introduced in check process</li>
</ul></div>
</div>
<div class="section level2">
<h2 id="time-expectations">Time Expectations<a class="anchor" aria-label="anchor" href="#time-expectations"></a></h2>
<ul><li>
<strong>Package check</strong>: 10-15 seconds</li>
<li>
<strong>Package install</strong>: 1 second</li>
<li>
<strong>Documentation</strong>: 1.5 seconds<br></li>
<li>
<strong>Dependency installation</strong>: 2-5 minutes (when network available)</li>
<li>
<strong>Example app startup</strong>: 5-10 seconds (when dependencies available)</li>
</ul><p><strong>ALWAYS wait for completion. NEVER CANCEL long-running commands.</strong></p>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Willy Ray.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

